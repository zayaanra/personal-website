{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = simplifyAccess;\n\nvar _t = require(\"@babel/types\");\n\nconst {\n  LOGICAL_OPERATORS,\n  assignmentExpression,\n  binaryExpression,\n  cloneNode,\n  identifier,\n  logicalExpression,\n  numericLiteral,\n  sequenceExpression,\n  unaryExpression\n} = _t;\n\nfunction simplifyAccess(path, bindingNames) {\n  path.traverse(simpleAssignmentVisitor, {\n    scope: path.scope,\n    bindingNames,\n    seen: new WeakSet()\n  });\n}\n\nconst simpleAssignmentVisitor = {\n  UpdateExpression: {\n    exit(path) {\n      const {\n        scope,\n        bindingNames\n      } = this;\n      const arg = path.get(\"argument\");\n      if (!arg.isIdentifier()) return;\n      const localName = arg.node.name;\n      if (!bindingNames.has(localName)) return;\n\n      if (scope.getBinding(localName) !== path.scope.getBinding(localName)) {\n        return;\n      }\n\n      if (path.parentPath.isExpressionStatement() && !path.isCompletionRecord()) {\n        const operator = path.node.operator == \"++\" ? \"+=\" : \"-=\";\n        path.replaceWith(assignmentExpression(operator, arg.node, numericLiteral(1)));\n      } else if (path.node.prefix) {\n        path.replaceWith(assignmentExpression(\"=\", identifier(localName), binaryExpression(path.node.operator[0], unaryExpression(\"+\", arg.node), numericLiteral(1))));\n      } else {\n        const old = path.scope.generateUidIdentifierBasedOnNode(arg.node, \"old\");\n        const varName = old.name;\n        path.scope.push({\n          id: old\n        });\n        const binary = binaryExpression(path.node.operator[0], identifier(varName), numericLiteral(1));\n        path.replaceWith(sequenceExpression([assignmentExpression(\"=\", identifier(varName), unaryExpression(\"+\", arg.node)), assignmentExpression(\"=\", cloneNode(arg.node), binary), identifier(varName)]));\n      }\n    }\n\n  },\n  AssignmentExpression: {\n    exit(path) {\n      const {\n        scope,\n        seen,\n        bindingNames\n      } = this;\n      if (path.node.operator === \"=\") return;\n      if (seen.has(path.node)) return;\n      seen.add(path.node);\n      const left = path.get(\"left\");\n      if (!left.isIdentifier()) return;\n      const localName = left.node.name;\n      if (!bindingNames.has(localName)) return;\n\n      if (scope.getBinding(localName) !== path.scope.getBinding(localName)) {\n        return;\n      }\n\n      const operator = path.node.operator.slice(0, -1);\n\n      if (LOGICAL_OPERATORS.includes(operator)) {\n        path.replaceWith(logicalExpression(operator, path.node.left, assignmentExpression(\"=\", cloneNode(path.node.left), path.node.right)));\n      } else {\n        path.node.right = binaryExpression(operator, cloneNode(path.node.left), path.node.right);\n        path.node.operator = \"=\";\n      }\n    }\n\n  }\n};","map":{"version":3,"sources":["C:/Users/rahma/Desktop/Projects/Python/website/personal-website/frontend/app/node_modules/@babel/helper-simple-access/lib/index.js"],"names":["Object","defineProperty","exports","value","default","simplifyAccess","_t","require","LOGICAL_OPERATORS","assignmentExpression","binaryExpression","cloneNode","identifier","logicalExpression","numericLiteral","sequenceExpression","unaryExpression","path","bindingNames","traverse","simpleAssignmentVisitor","scope","seen","WeakSet","UpdateExpression","exit","arg","get","isIdentifier","localName","node","name","has","getBinding","parentPath","isExpressionStatement","isCompletionRecord","operator","replaceWith","prefix","old","generateUidIdentifierBasedOnNode","varName","push","id","binary","AssignmentExpression","add","left","slice","includes","right"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = simplifyAccess;\n\nvar _t = require(\"@babel/types\");\n\nconst {\n  LOGICAL_OPERATORS,\n  assignmentExpression,\n  binaryExpression,\n  cloneNode,\n  identifier,\n  logicalExpression,\n  numericLiteral,\n  sequenceExpression,\n  unaryExpression\n} = _t;\n\nfunction simplifyAccess(path, bindingNames) {\n  path.traverse(simpleAssignmentVisitor, {\n    scope: path.scope,\n    bindingNames,\n    seen: new WeakSet()\n  });\n}\n\nconst simpleAssignmentVisitor = {\n  UpdateExpression: {\n    exit(path) {\n      const {\n        scope,\n        bindingNames\n      } = this;\n      const arg = path.get(\"argument\");\n      if (!arg.isIdentifier()) return;\n      const localName = arg.node.name;\n      if (!bindingNames.has(localName)) return;\n\n      if (scope.getBinding(localName) !== path.scope.getBinding(localName)) {\n        return;\n      }\n\n      if (path.parentPath.isExpressionStatement() && !path.isCompletionRecord()) {\n        const operator = path.node.operator == \"++\" ? \"+=\" : \"-=\";\n        path.replaceWith(assignmentExpression(operator, arg.node, numericLiteral(1)));\n      } else if (path.node.prefix) {\n        path.replaceWith(assignmentExpression(\"=\", identifier(localName), binaryExpression(path.node.operator[0], unaryExpression(\"+\", arg.node), numericLiteral(1))));\n      } else {\n        const old = path.scope.generateUidIdentifierBasedOnNode(arg.node, \"old\");\n        const varName = old.name;\n        path.scope.push({\n          id: old\n        });\n        const binary = binaryExpression(path.node.operator[0], identifier(varName), numericLiteral(1));\n        path.replaceWith(sequenceExpression([assignmentExpression(\"=\", identifier(varName), unaryExpression(\"+\", arg.node)), assignmentExpression(\"=\", cloneNode(arg.node), binary), identifier(varName)]));\n      }\n    }\n\n  },\n  AssignmentExpression: {\n    exit(path) {\n      const {\n        scope,\n        seen,\n        bindingNames\n      } = this;\n      if (path.node.operator === \"=\") return;\n      if (seen.has(path.node)) return;\n      seen.add(path.node);\n      const left = path.get(\"left\");\n      if (!left.isIdentifier()) return;\n      const localName = left.node.name;\n      if (!bindingNames.has(localName)) return;\n\n      if (scope.getBinding(localName) !== path.scope.getBinding(localName)) {\n        return;\n      }\n\n      const operator = path.node.operator.slice(0, -1);\n\n      if (LOGICAL_OPERATORS.includes(operator)) {\n        path.replaceWith(logicalExpression(operator, path.node.left, assignmentExpression(\"=\", cloneNode(path.node.left), path.node.right)));\n      } else {\n        path.node.right = binaryExpression(operator, cloneNode(path.node.left), path.node.right);\n        path.node.operator = \"=\";\n      }\n    }\n\n  }\n};"]},"metadata":{},"sourceType":"script"}